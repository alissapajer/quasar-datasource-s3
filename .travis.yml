language: scala
scala: 2.12.4
jdk: oraclejdk8
dist: trusty
sudo: false
script:
- sbt test lwc/assembly
branches:
  except:
  - "/^v\\d+\\.\\d+\\.\\d+$/"
cache:
  directories:
  - "$HOME/.coursier/cache"
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt"
before_cache:
- find "$HOME/.sbt/" -name '*.lock' -print0 | xargs -0 rm
- find "$HOME/.ivy2/" -name 'ivydata-*.properties' -print0 | xargs -0 rm
deploy:
  provider: releases
  key:
    secure: F9BzO6FEMq8i8PRBJJX9Ej7maLMhr0C4WoaveNxU8bwflw4CsXnSeifGmXGB23Px8m9kYARzX9KG0/YY6pbw2qz74HxLkwx2/CRQTAEDP6+/bfpaNmtNq9P05sxkeCmS1Hucw4nczprqlj8bg/5zbwNIr54oImPaBLaT4QxHiPQ=
  file_glob: true
  file:
    - runner/target/scala-2.12/quasar-s3-assembly-$VERSION.jar
  skip_cleanup: true
  script
    - ./scripts/version
  on:
    tags: false
    #all_branches: true
    # Omit tagged builds and publish on master and backport/*
    #condition: $TRAVIS_TAG = '' && ($TRAVIS_BRANCH == "master" || $TRAVIS_BRANCH == backport/*)


